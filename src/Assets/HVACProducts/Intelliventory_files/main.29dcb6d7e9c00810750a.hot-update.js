webpackHotUpdate("main",{

/***/ "./src/components/LiveView/index.js":
/*!******************************************!*\
  !*** ./src/components/LiveView/index.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck */ "./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass */ "./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits */ "./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js");
/* harmony import */ var _home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper */ "./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js");
/* harmony import */ var _home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral */ "./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _Cabinet_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Cabinet/index.js */ "./src/components/Cabinet/index.js");
/* harmony import */ var _DataTable_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../DataTable/index.js */ "./src/components/DataTable/index.js");
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! styled-components */ "./node_modules/styled-components/dist/styled-components.browser.esm.js");
/* harmony import */ var _Notifications___WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Notifications/ */ "./src/components/Notifications/index.js");
/* harmony import */ var notistack__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! notistack */ "./node_modules/notistack/build/index.js");
/* harmony import */ var notistack__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(notistack__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _utils_media__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../utils/media */ "./src/utils/media.js");
/* harmony import */ var _Language_notifications__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../Language/notifications */ "./src/Language/notifications.js");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! framer-motion */ "./node_modules/framer-motion/dist/framer-motion.es.js");
/* harmony import */ var local_storage__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! local-storage */ "./node_modules/local-storage/local-storage.js");
/* harmony import */ var local_storage__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(local_storage__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _constants_index_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../constants/index.js */ "./src/constants/index.js");
/* harmony import */ var _redux_actions_index__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../redux/actions/index */ "./src/redux/actions/index.js");
/* harmony import */ var _AdvancedCabinet_index_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../AdvancedCabinet/index.js */ "./src/components/AdvancedCabinet/index.js");






var _jsxFileName = "/home/prat/Desktop/code/office/intelliventory-dash/src/components/LiveView/index.js";

function _templateObject11() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n  border-radius: 0.25rem;\n  border: none;\n  font-family: \"Montserrat\";\n  font-size: 0.5rem;\n  font-weight: 600;\n  padding: 0.1rem 0.75rem;\n"]);

  _templateObject11 = function _templateObject11() {
    return data;
  };

  return data;
}

function _templateObject10() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n  width: 80%;\n  height: 45%;\n  border: none;\n  border-radius: 0.85rem;\n  color: white;\n  display: flex;\n  background-color: #1d252d;\n  align-items: center;\n  justify-content: center;\n  flex-direction: row;\n"]);

  _templateObject10 = function _templateObject10() {
    return data;
  };

  return data;
}

function _templateObject9() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 80%;\n  height: 15rem;\n  user-select: none;\n  cursor: pointer;\n"]);

  _templateObject9 = function _templateObject9() {
    return data;
  };

  return data;
}

function _templateObject8() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n    justify-content: center;\n  "]);

  _templateObject8 = function _templateObject8() {
    return data;
  };

  return data;
}

function _templateObject7() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n  width: 95%;\n  height: auto;\n  justify-content: start;\n  align-items: center;\n  display: flex;\n  padding: 0.5rem;\n  flex-direction: row;\n  ", "\n"]);

  _templateObject7 = function _templateObject7() {
    return data;
  };

  return data;
}

function _templateObject6() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n  width: 7.5rem;\n  height: 1.75rem;\n  border-radius: 0.15rem;\n  background-color: #1c2631;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0.25rem;\n  color: white;\n  font-family: \"Montserrat\";\n  font-weight: 200;\n  font-size: 0.75rem;\n  box-shadow: 0px 0.2rem 0.2rem rgba(0, 0, 0, 0.25);\n  user-select: none;\n  cursor: pointer;\n"]);

  _templateObject6 = function _templateObject6() {
    return data;
  };

  return data;
}

function _templateObject5() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n  width: 100%;\n  margin-top: ", ";\n"]);

  _templateObject5 = function _templateObject5() {
    return data;
  };

  return data;
}

function _templateObject4() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n    justify-content: center;\n  "]);

  _templateObject4 = function _templateObject4() {
    return data;
  };

  return data;
}

function _templateObject3() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n  width: 100%;\n\n  margin: 1rem 0px;\n  display: flex;\n  ", "\n"]);

  _templateObject3 = function _templateObject3() {
    return data;
  };

  return data;
}

function _templateObject2() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n  position: relative;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);

  _templateObject2 = function _templateObject2() {
    return data;
  };

  return data;
}

function _templateObject() {
  var data = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__["default"])(["\n  text-align: center;\n  display: ", ";\n  flex-direction: column;\n  width: 95vw;\n  background: #0d1823;\n  overflow: hidden;\n"]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}



 //import ManagementTable from "../ManagementTable/index.js";












var Wrapper = styled_components__WEBPACK_IMPORTED_MODULE_9__["default"].div(_templateObject(), function (props) {
  return props.show ? "flex" : "none";
});
var ExtraWrapper = styled_components__WEBPACK_IMPORTED_MODULE_9__["default"].div(_templateObject2());
var TableWrapper = styled_components__WEBPACK_IMPORTED_MODULE_9__["default"].div(_templateObject3(), _utils_media__WEBPACK_IMPORTED_MODULE_12__["media"].tablet(_templateObject4()));
var SpacingWrapper = styled_components__WEBPACK_IMPORTED_MODULE_9__["default"].div(_templateObject5(), function (props) {
  return props.standalone ? "1.25rem" : "0px";
});
var SwitchButton = Object(styled_components__WEBPACK_IMPORTED_MODULE_9__["default"])(framer_motion__WEBPACK_IMPORTED_MODULE_15__["motion"].div)(_templateObject6());
var SwitcherContainer = Object(styled_components__WEBPACK_IMPORTED_MODULE_9__["default"])(framer_motion__WEBPACK_IMPORTED_MODULE_15__["motion"].div)(_templateObject7(), _utils_media__WEBPACK_IMPORTED_MODULE_12__["media"].phone(_templateObject8()));
var PreRenderMessageContainer = styled_components__WEBPACK_IMPORTED_MODULE_9__["default"].div(_templateObject9());
var PreRenderMessage = Object(styled_components__WEBPACK_IMPORTED_MODULE_9__["default"])(framer_motion__WEBPACK_IMPORTED_MODULE_15__["motion"].div)(_templateObject10());
var DismissButton = styled_components__WEBPACK_IMPORTED_MODULE_9__["default"].button(_templateObject11());
/*****************************************************************************/

/*************************** Redux Methods ***********************************/

/*****************************************************************************/

function mapDispatchToProps(dispatch) {
  return {
    getLiveCabinets: function getLiveCabinets(payload) {
      return dispatch(Object(_redux_actions_index__WEBPACK_IMPORTED_MODULE_18__["getLiveCabinets"])(payload));
    },
    getInitialLiveCabinets: function getInitialLiveCabinets(payload) {
      return dispatch(Object(_redux_actions_index__WEBPACK_IMPORTED_MODULE_18__["getInitialLiveCabinets"])(payload));
    },
    getSnapshot: function getSnapshot(payload) {
      return dispatch(Object(_redux_actions_index__WEBPACK_IMPORTED_MODULE_18__["getSnapshot"])(payload));
    },
    getInitialSnapshotCabinets: function getInitialSnapshotCabinets(payload) {
      return dispatch(Object(_redux_actions_index__WEBPACK_IMPORTED_MODULE_18__["getInitialSnapshotCabinets"])(payload));
    },
    getInitialSnapshotCabinetsKPI: function getInitialSnapshotCabinetsKPI(payload) {
      return dispatch(Object(_redux_actions_index__WEBPACK_IMPORTED_MODULE_18__["getInitialSnapshotCabinetsKPI"])(payload));
    }
  };
}

var mapStateToProps = function mapStateToProps(state) {
  return {
    cabinetsLive: state.cabinetsLive,
    selectedCabinet: state.selectedCabinet,
    cabinetsSnapshot: state.cabinetsSnapshot,
    storesSnapshot: state.storesSnapshot,
    regionsSnapshot: state.regionsSnapshot,
    categoriesSnapshot: state.categoriesSnapshot,
    customersSnapshot: state.clientsSnapshot,
    productsSnapshot: state.productsSnapshot,
    activeCabinet: state.activeCabinet,
    activeTimestamp: state.activeTimestamp,
    standaloneSwitch: state.standaloneSwitch,
    locale: state.locale,
    resultLiveKPI: state.resultLiveKPI
  };
};

var token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJleHAiOjE1OTYzNzkxNTQsIm5iZiI6MTU5NjM3NTU1NCwiaWF0IjoxNTk2Mzc1NTU0LCJzdWIiOiI1ZWIxODU2NWJkZWFiZDFiYzExNGUzNDIiLCJhdWQiOiJub3RfaW1wbGVtZW50ZWQiLCJpc3MiOiJodHRwczovL2lkZW50aXR5LmN0aGluZ3MuY28iLCJjbGFpbXMiOnsibmFtZSI6eyJmaXJzdCI6IlByYXRpayIsIm1pZGRsZSI6bnVsbCwibGFzdCI6Imd1cnVkYXR0In0sImVtYWlsIjp7InByaW1hcnkiOiJwLmd1cnVkYXR0QGN0aGluZ3MuY28iLCJzZWNvbmRhcmllcyI6WyJwLmd1cnVkYXR0QGN0aGluZ3MuY28iXX0sInByZWZlcnJlZF9sb2NhbGUiOiJlbl9nYiIsIm9yZyI6ImN0aGluZ3NjbyIsImlkIjoiNWViMTg1NjViZGVhYmQxYmMxMTRlMzQyIn19.O9Sup0LrI8y0IaOvhb7nMTfRaH6xXwMH4DK4Tby_QfSWAGCKfwOOM2NVZq2QMoneaRXhHHiJPF6nXv68sYkBaWypbzqiI7IqGxKmuFeWeIMncUtW3SnOUw7ryv0Qm7ytK8bbWkA2hupfQBT9MlrNEkRT0jwn5ceDJWYSMVPtoi3EXXKlx-2aPVbcyc40RB_3fYlHp93yLjs-rcnByJNyEhJuoBkxlVw9PzA1jVQwug8VlVxWrHtByEd-ByKaF8zPG7-Qd7KLMew39l540FIw1JD3EqKm2FvnSnAEli6stArtkT3hJTFxHdoOy9EhITuGNjITGCn514niv5bEgo3_EMgkjOyOFKZJwLZ3s94s_rps8mAF5lKxlmR6azkNYyKWkmgQq9AzOt49lyafeqHMZ7geC1YNaEUwzNvP1EcwDHH3rtL_gQMHxH4x4oJBgcnKXvtWvFQr3lDIV7UY7WslBM0RUpzK9C5DtsRkfFrogPDmWyMLAJWL5uBLKqUyp0cx2PVvRXX01pCIwXj1a6QkHpExTdrLn2BBGn0ID4Q1Tki2t4-Qr0hhegtezXpNj92urnVwAHc75AimCbH3C9JcO8Gs_Bp7cx_Gvjhu50ftWG56ShNoMpkuV6LaqzUtVXG1oU5tueVsAUbt5u08N91Z8OsJzrkiXHaYct56SQNR3e8";
/*****************************************************************************/

/*************************** Class Logic *************************************/

/*****************************************************************************/

var ConnectedLiveView = /*#__PURE__*/function (_Component) {
  Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__["default"])(ConnectedLiveView, _Component);

  var _super = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__["default"])(ConnectedLiveView);

  function ConnectedLiveView() {
    var _this;

    Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__["default"])(this, ConnectedLiveView);

    _this = _super.call(this);

    _this.toggleScrollFlag = function () {
      _this.setState({
        scrollToFlag: false
      });
    };

    _this.rowSelectionHandler = function (rowData) {
      _this.setState({
        specificCard: rowData,
        scrollId: rowData[0],
        scrollToFlag: true,
        blurState: true
      }, function () {});

      window.scrollTo({
        top: _this.myRef.current.offsetTop,
        left: 0,
        behaviour: "smooth"
      });
    };

    _this.action = function (key) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_6___default.a.Fragment, {
        __self: Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this),
        __source: {
          fileName: _jsxFileName,
          lineNumber: 206,
          columnNumber: 5
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(DismissButton, {
        onClick: function onClick() {
          _this.props.closeSnackbar(key);
        },
        __self: Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this),
        __source: {
          fileName: _jsxFileName,
          lineNumber: 207,
          columnNumber: 7
        }
      }, Object(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"])(["staticText", "information_card", "dismiss"])));
    };

    _this.throwNotiff = function (config) {
      _this.props.enqueueSnackbar(config.sub_header, {
        anchorOrigin: {
          vertical: config.vertical,
          horizontal: config.horizontal,
          action: _this.action
        },
        variant: config.variant
      });
    };

    _this.unFocusSpecificCard = function () {
      //Unfocusing and clearing the cabinet live view.
      _this.setState({
        specificCard: [],
        blurState: false,
        resetTheSearch: true
      }, function () {
        _this.setState({
          resetTheSearch: false
        });
      });
    };

    _this.wrapDataTable = function (data) {
      return [].concat.apply([], data.map(function (row, i) {
        return row.map(function (element, j) {
          return {
            product_name: element.product.name,
            count: element.count,
            id: data.slice(0, i).reduce(function (count, row) {
              return count = count + row.length;
            }, 0)
            /*i * row.length*/
            + j
          };
        });
      }));
    };

    _this.searchHandler = function (results) {
      console.log("Results of search", results);

      _this.setState({
        specificCard: results,
        blurState: true
      });
    };

    _this.handleSwitch = function (state) {
      _this.setState({
        window: state
      }, function () {
        if (_this.webSocket && _this.webSocket.readyState === WebSocket.OPEN) {
          if (_this.state.window) {
            _this.setState({
              cabinetsLive: []
            });

            _this.webSocket.send(JSON.stringify({
              request: "change_response_type",
              param: _this.props.activeCabinet,
              response_type: "basic"
            }));
          } else {
            if (!_this.state.dataSourceFromSnapshot) {
              console.log("Changing tabs..");
              console.log(_this.props.activeCabinet);

              _this.setState({
                cabinetsLiveAdvanced: []
              });

              if (_this.webSocket) {
                _this.webSocket.send(JSON.stringify({
                  request: "change_response_type",
                  param: _this.props.activeCabinet,
                  response_type: "extended"
                }));
              }
            }
          }
        }
      });
    };

    _this.connectSocket = function (cabinet_id, handshake) {
      var self = Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__["default"])(_this);

      if (_this.webSocket && _this.webSocket.readyState !== WebSocket.OPEN) {
        console.log("State: " + local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.get("allowSocketClosure"));
        _this.webSocket = new WebSocket(_constants_index_js__WEBPACK_IMPORTED_MODULE_17__["socketUrl"] + "?access_token=" + local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.get("token"));
      }

      console.log("NEW SOCKET OPENING CALLED!!!!!!");

      _this.webSocket.onopen = function () {
        console.log("OPENED");

        try {
          _this.webSocket && _this.webSocket.send(JSON.stringify({
            request: "add_cabinet",
            param: cabinet_id,
            response_type: handshake
          }));
        } catch (error) {
          console.log(error);
          return;
        }

        self.timeout = 250;
      };

      _this.webSocket.onmessage = function (event) {
        var data = JSON.parse(JSON.parse(event.data));

        if (data.type !== "heartbeat") {
          console.log("MESSAGE", data);

          if (data.type === "realtime_triggers") {
            var config = {
              horizontal: "left",
              vertical: "top",
              variant: "warning",
              header: "".concat(data.triggered[0].trigger.name, " ").concat(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"][("liveView", "notifications", "trigger_spawn")]),
              sub_header: "".concat(data.triggered[0].trigger.name, " triggered!")
            };

            _this.throwNotiff(config);
          } else {
            if (data && (data === null || data === void 0 ? void 0 : data.state)) {
              var _config = {
                horizontal: "left",
                vertical: "top",
                variant: "info",
                sub_header: Object(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"])(["live_view", "notifications", "new_update"]) + data.name
              };

              _this.throwNotiff(_config);

              _this.state.window ? _this.setState({
                cabinetsLive: data.state,
                liveTimestamp: data.ts,
                dataTableData: _this.wrapDataTable(data.state)
              }) : _this.setState({
                cabinetsLiveAdvanced: data,
                liveTimestamp: data.ts,
                dataTableData: _this.wrapDataTable(data.state)
              }, function () {
                console.log(_this.state);
              });
            }
          }
        } else {
          console.log("Peacefully getting heartbeats in basic view.");
        }
      };

      _this.webSocket.onerror = function (event) {
        console.log("ERROR", event);
      };

      _this.webSocket.onclose = function () {
        if (!local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.get("allowSocketClosure")) {
          setTimeout(function () {
            console.log("Attempt to reconnect");
            self.connectSocket(cabinet_id, handshake);
          }, Math.min(10000, self.timeout += self.timeout));
        } else {
          console.log("CLOSED");
        }
      };
    };

    _this.myRef = react__WEBPACK_IMPORTED_MODULE_6___default.a.createRef();
    _this.state = {
      cabinetsLive: [],
      //Set of live cabinets.
      cabinetsLiveAdvanced: [],
      dataTableData: [],
      // Data table data.
      scrollId: -1,
      //Scroll ID container.
      scrollToFlag: false,
      //Scroll to position.
      blurState: false,
      // Refreshing table state.
      specificCard: [],
      //Specific set of cards to highlight.
      liveTimestamp: "",
      resetTheSearch: false,
      window: true,
      readyToRender: false,
      dataSourceFromSnapshot: false
    };
    return _this;
  }

  Object(_home_prat_Desktop_code_office_intelliventory_dash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ConnectedLiveView, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      //this.connectSocket2(this.props.activeCabinet, "extended");
      //this.webSocket = new WebSocket(socketUrl);
      if (this.webSocket && this.webSocket.readyState !== WebSocket.OPEN) {
        this.webSocket = new WebSocket(_constants_index_js__WEBPACK_IMPORTED_MODULE_17__["socketUrl"] + "/?access_token=" + local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.get("token"));
      }
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      var _this2 = this;

      console.log(nextProps);

      if (!nextProps.activeCabinet || !nextProps.timestamp) {
        this.setState({
          readyToRender: false
        });
      }

      if (this.state.window) {
        if (nextProps.cabinetsLive) {
          if (nextProps.cabinetsLive.cabinets) {
            this.setState({
              cabinetsLive: nextProps.cabinetsLive.cabinets.state,
              liveTimestamp: nextProps.cabinetsLive.cabinets.ts,
              dataTableData: this.wrapDataTable(nextProps.cabinetsLive.cabinets.state)
            }, function () {
              return;
            });
          } else {
            this.setState({
              cabinetsLive: [],
              dataTableData: [],
              liveTimestamp: ""
            });
          }
        }

        if (nextProps.activeCabinet && nextProps.activeTimestamp && this.props.cabinetsLive.cabinets.state !== nextProps.cabinets.state) {
          if (this.webSocket && this.webSocket.readyState === WebSocket.OPEN) {
            this.webSocket.close();
          }

          this.props.getInitialSnapshotCabinets({
            uid: nextProps.activeCabinet,
            timestamp: nextProps.activeTimestamp,
            loaderLocation: "liveView"
          });
          this.unFocusSpecificCard();
        } else if (nextProps.activeCabinet && !nextProps.activeTimestamp) {
          if (this.webSocket && this.webSocket.readyState === WebSocket.OPEN) {
            return;
          } else {
            console.log("Calling basic live view with standard condition.");
            local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.set("allowSocketClosure", false);
            this.webSocket = new WebSocket(_constants_index_js__WEBPACK_IMPORTED_MODULE_17__["socketUrl"] + "?access_token=" + local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.get("token"));
            this.connectSocket(nextProps.activeCabinet, "basic");
            this.unFocusSpecificCard();
          }
        }
      } else {
        if (this.deepCompareSnapshotResults(this.props.resultLiveKPI, nextProps.resultLiveKPI)) {
          if (nextProps === null || nextProps === void 0 ? void 0 : nextProps.resultLiveKPI) {
            this.setState({
              cabinetsLiveAdvanced: nextProps.resultLiveKPI,
              liveTimestamp: nextProps.resultLiveKPI.ts,
              cabinet_name: nextProps.resultLiveKPI.name
            }, function () {
              return;
            });
          }
        }

        if (nextProps.activeCabinet && nextProps.activeTimestamp) {
          var _nextProps$resultLive, _nextProps$resultLive2;

          if (nextProps.resultLiveKPI && ((_nextProps$resultLive = nextProps.resultLiveKPI) === null || _nextProps$resultLive === void 0 ? void 0 : (_nextProps$resultLive2 = _nextProps$resultLive.cabinets) === null || _nextProps$resultLive2 === void 0 ? void 0 : _nextProps$resultLive2.ts) === nextProps.activeTimestamp) {
            console.log("Already fetched the snapshot view for this mode. Returning.");
            return;
          }

          if (this.webSocket && this.webSocket.readyState === WebSocket.OPEN) {
            this.webSocket.close();
          }

          this.setState({
            dataSourceFromSnapshot: true
          }, function () {
            _this2.props.getInitialSnapshotCabinetsKPI({
              uid: nextProps.activeCabinet,
              timestamp: nextProps.activeTimestamp,
              loaderLocation: "liveview"
            });
          });
        } else if (nextProps.activeCabinet && !nextProps.activeTimestamp) {
          console.log("Calling extended live view with standard condition.");

          if (this.webSocket && this.webSocket.readyState === WebSocket.OPEN) {} else {
            local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.set("allowSocketClosure", false);
            this.webSocket = new WebSocket(_constants_index_js__WEBPACK_IMPORTED_MODULE_17__["socketUrl"] + "?access_token=" + local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.get("token"));
          }

          this.setState({
            dataSourceFromSnapshot: false
          }, function () {
            _this2.connectSocket(nextProps.activeCabinet, "extended");
          });
        }
      }
    }
  }, {
    key: "deepCompareSnapshotResults",
    value: function deepCompareSnapshotResults(data_1, data_2) {
      for (var i = 0; i < (data_1 === null || data_1 === void 0 ? void 0 : (_data_1$cabinets = data_1.cabinets) === null || _data_1$cabinets === void 0 ? void 0 : (_data_1$cabinets$stat = _data_1$cabinets.state) === null || _data_1$cabinets$stat === void 0 ? void 0 : _data_1$cabinets$stat.length); i++) {
        var _data_1$cabinets, _data_1$cabinets$stat;

        for (var j = 0; j < (data_1 === null || data_1 === void 0 ? void 0 : (_data_1$cabinets2 = data_1.cabinets) === null || _data_1$cabinets2 === void 0 ? void 0 : _data_1$cabinets2.state[i].length); j++) {
          var _data_1$cabinets2;

          if (data_1.cabinets.state[i][j].count !== data_2.cabinets.state[i][j].count) {
            return false;
          }
        }
      }

      return true;
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      var _this3 = this;

      if (prevProps.activeCabinet !== this.props.activeCabinet) {
        console.log("This is the changing cabinet call!!!!!!");

        if (this.webSocket && this.webSocket.readyState === WebSocket.OPEN) {
          this.setState({
            cabinetsLive: [],
            cabinetsLiveAdvanced: []
          }, function () {
            console.log("Refreshing connenction");
            local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.set("allowSocketClosure", true);

            _this3.webSocket.close();

            _this3.webSocket = new WebSocket(_constants_index_js__WEBPACK_IMPORTED_MODULE_17__["socketUrl"] + "?access_token=" + local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.get("token"));

            _this3.connectSocket(_this3.props.activeCabinet, _this3.state.window ? "basic" : "extended");
          });
        } else {
          this.setState({
            cabinetsLive: [],
            cabinetsLiveAdvanced: []
          }, function () {
            console.log("Connection existent");
            _this3.webSocket = new WebSocket(_constants_index_js__WEBPACK_IMPORTED_MODULE_17__["socketUrl"] + "?access_token=" + local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.get("token"));

            _this3.connectSocket(_this3.props.activeCabinet, _this3.state.window ? "basic" : "extended");
          });
        }
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      clearInterval(this.interval);
      local_storage__WEBPACK_IMPORTED_MODULE_16___default.a.set("allowSocketClosure", true);
      console.log("Unmounting basic.");
      this.webSocket && this.webSocket.close();
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;

      var translation = {
        TabNames: {
          Basic: Object(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"])(["staticText", "liveView", "versions", "basic"]),
          Advanced: Object(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"])(["staticText", "liveView", "versions", "advanced"])
        },
        PreRenderMessage: {
          Basic: Object(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"])(["staticText", "liveView", "placeholderBasic"]),
          Advanced: Object(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"])(["staticText", "liveView", "placeholderAdvanced"])
        }
      };
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(ExtraWrapper, {
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 625,
          columnNumber: 7
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(SwitcherContainer, {
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 626,
          columnNumber: 9
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(SwitchButton, {
        onClick: function onClick() {
          _this4.handleSwitch(1);
        },
        whileTap: {
          scale: 0.9
        },
        transition: {
          duration: 0.1
        },
        animate: {
          backgroundColor: this.state.window ? "#92cbc5" : "#1C2631",
          color: this.state.window ? "black" : "white",
          fontWeight: this.state.window ? 400 : 300
        },
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 627,
          columnNumber: 11
        }
      }, translation["TabNames"]["Basic"]), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(SwitchButton, {
        onClick: function onClick() {
          _this4.handleSwitch(0);
        },
        whileTap: {
          scale: 0.9
        },
        transition: {
          duration: 0.1
        },
        animate: {
          backgroundColor: !this.state.window ? "#92cbc5" : "#1C2631",
          color: !this.state.window ? "black" : "white",
          fontWeight: !this.state.window ? 400 : 300
        },
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 641,
          columnNumber: 11
        }
      }, translation["TabNames"]["Advanced"])), this.state.window ? this.props.activeCabinet ? this.renderBasicTab() : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(PreRenderMessageContainer, {
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 661,
          columnNumber: 13
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(PreRenderMessage, {
        animate: {
          opacity: [0, 1]
        },
        transition: {
          duration: 0.2,
          ease: "linear"
        },
        whileTap: {
          scale: 0.88,
          opacity: 0.88
        },
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 662,
          columnNumber: 15
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", {
        style: {
          display: "flex",
          width: "100%",
          fontFamily: "Montserrat",
          fontWeight: "100",
          fontSize: "1.5rem",
          justifyContent: "center",
          alignItems: "center"
        },
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 667,
          columnNumber: 17
        }
      }, translation["PreRenderMessage"]["Basic"]))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", {
        style: {
          width: "95%",
          display: "flex",
          justifyContent: "center"
        },
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 684,
          columnNumber: 11
        }
      }, this.props.activeCabinet ? this.state.cabinetsLive ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_AdvancedCabinet_index_js__WEBPACK_IMPORTED_MODULE_19__["default"], {
        key: 1,
        uid: this.props.activeCabinet,
        cabinetData: this.state.cabinetsLiveAdvanced,
        dataSourceFromSnapshot: this.state.dataSourceFromSnapshot,
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 689,
          columnNumber: 17
        }
      }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", {
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 696,
          columnNumber: 17
        }
      }, " ") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(PreRenderMessageContainer, {
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 699,
          columnNumber: 15
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(PreRenderMessage, {
        animate: {
          opacity: [0, 1]
        },
        transition: {
          duration: 0.2,
          ease: "linear"
        },
        whileTap: {
          scale: 0.88,
          opacity: 0.88
        },
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 700,
          columnNumber: 17
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", {
        style: {
          display: "flex",
          width: "100%",
          fontFamily: "Montserrat",
          fontWeight: "100",
          fontSize: "1.5rem",
          justifyContent: "center",
          alignItems: "center"
        },
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 705,
          columnNumber: 19
        }
      }, translation["PreRenderMessage"]["Advanced"])))));
    }
  }, {
    key: "renderAdvancedCabinet",
    value: function renderAdvancedCabinet(cabinet_data) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_AdvancedCabinet_index_js__WEBPACK_IMPORTED_MODULE_19__["default"], {
        key: 1,
        uid: this.props.activeCabinet,
        resultLiveKPI: cabinet_data,
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 729,
          columnNumber: 7
        }
      });
    } //Check mount of advance from recv props.

  }, {
    key: "renderBasicTab",
    value: function renderBasicTab() {
      var _this5 = this;

      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(ExtraWrapper, {
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 740,
          columnNumber: 7
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Wrapper, {
        show: this.props.activeCabinet,
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 741,
          columnNumber: 9
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(SpacingWrapper, {
        ref: this.myRef,
        standalone: this.props.standaloneSwitch,
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 742,
          columnNumber: 11
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_Cabinet_index_js__WEBPACK_IMPORTED_MODULE_7__["default"], {
        liveViewTitleText: Object(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"])(["staticText", "liveView", "header"]),
        refresh: Object(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"])(["staticText", "liveView", "refresh"]),
        cardIndex: this.state.specificCard,
        cabinetData: this.state.cabinetsLive,
        unFocusSpecificCard: this.unFocusSpecificCard,
        scrollState: this.state.scrollToFlag,
        resetScrollState: this.toggleScrollFlag,
        scrollId: this.state.scrollId,
        blurState: this.state.blurState,
        liveTimestamp: this.state.liveTimestamp,
        changeBlurState: function changeBlurState(bool) {
          _this5.setState({
            blurState: bool
          });
        },
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 746,
          columnNumber: 13
        }
      })), this.state.dataTableData.length > 0 && !this.props.standaloneSwitch && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(TableWrapper, {
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 766,
          columnNumber: 13
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_DataTable_index_js__WEBPACK_IMPORTED_MODULE_8__["default"], {
        title: Object(_Language_notifications__WEBPACK_IMPORTED_MODULE_13__["getText"])(["staticText", "tables", "dynamic", 12]),
        data: this.state.dataTableData,
        handleClick: this.rowSelectionHandler,
        handleSearch: this.searchHandler,
        unfocusCards: function unfocusCards() {
          _this5.setState({
            blurState: false,
            specificCard: []
          });
        },
        resetTheSearch: this.state.resetTheSearch,
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 767,
          columnNumber: 15
        }
      }))));
    }
  }]);

  return ConnectedLiveView;
}(react__WEBPACK_IMPORTED_MODULE_6__["Component"]);

var LiveView = Object(react_redux__WEBPACK_IMPORTED_MODULE_14__["connect"])(mapStateToProps, mapDispatchToProps)(ConnectedLiveView);
/* harmony default export */ __webpack_exports__["default"] = (Object(notistack__WEBPACK_IMPORTED_MODULE_11__["withSnackbar"])(LiveView));

/***/ })

})
//# sourceMappingURL=main.29dcb6d7e9c00810750a.hot-update.js.map